(function(){this.Map=function(){function e(){}return e.map,e.markers,e.openedInfo=null,e.attachMessage=function(o){return google.maps.event.addListener(e.markers[o].marker,"click",function(){return e.openedInfo&&e.openedInfo.close(),e.markers[o].window&&e.markers[o].window.open(e.markers[o].marker.getMap(),e.markers[o].marker),e.openedInfo=e.markers[o].window}),google.maps.event.addListener(e.markers[o].window,"closeclick",function(){return e.openedInfo=null})},e.load=function(o){var n,a;a=[36.204824,138.252924],n={center:new google.maps.LatLng(a[0],a[1]),zoom:5,mapTypeId:google.maps.MapTypeId.ROADMAP,panControl:!1,zoomControl:!0,zoomControlOptions:{style:google.maps.ZoomControlStyle.LARGE},mapTypeControl:!0,scaleControl:!0,scrollwheel:!0,streetViewControl:!0,overviewMapControl:!0,overviewMapControlOptions:{opened:!0}},e.map=new google.maps.Map(o,n)},e.setMarkers=function(o){var n,a;e.markers=o,n=new google.maps.LatLngBounds,$.each(e.markers,function(o,a){var t,r,s;e.markers[o].marker=new google.maps.Marker(a.image?{position:new google.maps.LatLng(a.loc[0],a.loc[1]),icon:a.image,map:e.map}:{position:new google.maps.LatLng(a.loc[0],a.loc[1]),map:e.map}),n.extend(new google.maps.LatLng(a.loc[0],a.loc[1])),a.html?(t=a.html,e.markers[o].window=new google.maps.InfoWindow({content:t}),e.attachMessage(o)):(a.name||a.text)&&(r=a.name,s=a.text,t='<div class="marker-info">',r&&""!==r&&(t+="<p>"+r+"</p>"),s&&""!==s&&$.each(s.split(/[\r\n]+/),function(){return t+=this.match(/^https?:\/\//)?'<p><a href="'+this+'">'+this+"</a></p>":"<p>"+this+"</p>"}),t+="</div>",e.markers[o].window=new google.maps.InfoWindow({content:t}),e.attachMessage(o))}),$.isEmptyObject(e.markers)||(a=google.maps.event.addListener(e.map,"bounds_changed",function(){return this.getZoom()>13&&this.initialZoom===!0&&(this.setZoom(13),this.initialZoom=!1),google.maps.event.removeListener(a)}),e.map.initialZoom=!0,e.map.fitBounds(n))},e}()}).call(this);